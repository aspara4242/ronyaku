# Ronyakunannyo Mirai Gakuen Official Website

演劇を中心とした幅広い芸術分野での活動を画策するクリエイティブ団体、老若男女未来学園のウェブサイトです。

**URL: [https://ronyaku.com](https://ronyaku.com)**

---

## 📌 コンセプト：劇団公式サイトのフルリニューアル（設計・開発・運用）

およそ3年ぶりのリニューアルにあたり、デザインからシステム基盤までを全面的に再構築。単なる刷新ではなく、長期的な運用と情報発信の質を重視した設計を行った。

- **コンテンツファーストなデザインと実装**: 団体概要や活動内容などの情報をストレスなく届けるため、タイポグラフィと余白を徹底して最適化。Articleページにおいてはcheerioを用いた目次自動生成機能を実装するなど、長文コンテンツの読了体験を技術面からもサポートしている。

- **非エンジニアでも継続可能な運用基盤**: 専門知識のないメンバーでも直感的に更新できるよう、microCMSのスキーマ設計からプレビュー環境までを一貫して整備し、持続可能な運用フローを確立。

- **保守性とパフォーマンスの両立**: Next.js 15 / TypeScript / Vercel によるモダンな構成を採用。型安全による高い保守性と、インフラ最適化による高速なレスポンスを両立し、安定したリリースサイクルを実現。

---

## 🛠 技術スタック & 実行環境

本プロジェクトでは、最新のNext.js App Routerを軸に、フロントエンドからコンテンツ管理・インフラまでを統合したモダンなスタックを採用している。

### 🏗️ Core & Logic
| 技術名 | バージョン | 役割・選定理由 |
| :--- | :--- | :--- |
| **Next.js** | `15.0.3` | **App Router**による高速なレンダリングと柔軟な動的ルーティングを実現。 |
| **TypeScript** | `5.x` | microCMSと連携した型定義により、開発時の安全性と保守性を最大化。 |
| **cheerio** | `1.0.0` | 記事本文のHTMLをパースし、目次（ToC）の自動生成ロジックに使用。 |

### 🎨 Styling & UI
| 技術名 | カテゴリ | 役割・工夫した点 |
| :--- | :--- | :--- |
| **Tailwind CSS** | CSS Framework | デザインシステムの一貫性維持と、サイトの軽量化・高速表示の両立。 |

### ☁️ Content Management & Infrastructure
| サービス名 | 役割 | 運用上のメリット |
| :--- | :--- | :--- |
| **microCMS** | Headless CMS | **ドメインモデル設計**（News/Works等）。非エンジニアでも更新可能な体制。 |
| **Vercel** | Hosting / CD | GitHub連携による自動デプロイと、プレビュー環境による公開前検収。 |

---

## 💡 実装のこだわり

本プロジェクトでは、「情報を正しく届ける」ためのデザイン思想と、それを支える持続可能なシステム設計の両立に注力した。

### 1. 視覚的負担を軽減する色彩設計とミニマリズム
団体の活動内容やビジュアルを際立たせるため、装飾を排したコンテンツファーストなデザインを採用している。
- **低負荷な色設計**: ダークテーマを基調としつつ、純粋な黒（#000000）や白（#FFFFFF）を避け、コントラスト比を適切に調整。長文の閲覧時でも目に優しく、視覚的な負担が少ない画面を実現。
- **余白の設計**: 視覚的なノイズを削ぎ落とし、読み手が情報に集中できるよう、Tailwind CSSを用いて一貫した余白（Spacing）ルールを定義。シンプルながらも規律ある視覚的リズムを構築している。

### 2. CMS導入による運用効率化とプレビュー環境の構築
専門知識を持たないメンバーでも継続してコンテンツを更新できるよう、microCMSを基盤とした運用体制を構築した。
- **ヘッドレスCMSの導入**: ヘッドレスCMSであるmicroCMSを採用し、コンテンツ管理と画面表示の機能を完全に分離することで、デザインシステムをNext.js側で妥協なく実装することができた。
- **実用性の高いプレビュー機能**: microCMSの「画面プレビュー」と連携し、未公開データを安全に取得・表示する専用のプレビュー用ルートを実装。管理画面の「下書き保存」から即座に本番同様のプレビューを確認できるフローを確立することで、運用の安全性とコンテンツの質を向上させている。

### 3. ユーザビリティを向上させる細部の作り込み
基本デザインを補完し、ユーザーの利便性を高めるため、様々な工夫を凝らした。
- **長文記事のマルチページ化（ページネーション）の実装**: microCMSの「繰り返しフィールド」とNext.jsの動的ルーティングを組み合わせ、長大な記事を任意の箇所で複数ページに分割できる仕組みを構築。一画面あたりの情報量を適切に制御し、スクロール負荷を軽減。
- **動的な目次生成**: 長文記事において、`cheerio` を用いて本文のHTML構造から目次を自動抽出する機能を実装。上記のページネーション機能と併せてユーザーの読了体験を向上させている。
- **レスポンシブ対応**: TailwindCSS のブレイクポイントを活用し、画面サイズに応じてグローバルナビゲーションとフッターの構造を動的に切り替えるなど、デバイスごとの利用シーンに合わせて表示を最適化。

---

## 📂 プロジェクト構造

保守性と責務の分離を重視し、データ取得ロジック（libs）と表示（src/app）を明確に切り分けた構造を採用している。

```text
.
├── libs/                      # コンテンツタイプ別のデータ取得ロジック・ユーティリティ
│   ├── articles.ts            # 記事・ページ分割ロジック
│   ├── extractToc.ts          # 目次自動生成ユーティリティ
│   └── works.ts / news.ts     # 各コンテンツ専用のAPIクライアント
├── src/
│   ├── app/                   # App Router によるルーティングとページ定義
│   │   ├── (pages)/           # 各種メインコンテンツページ
│   │   │   ├── .../[id]       # idに応じたコンテンツを表示する動的ルート
│   │   │   └── .../draft/[id] # プレビュー確認用の専用ルート
│   │   └── layout.tsx         # 全体レイアウト・共通メタデータ定義
│   ├── components/            # 再利用可能なUIコンポーネント
│   │   ├── common/            # ナビゲーション・フッター等の共通部品
│   │   └── views/             # 各コンテンツ固有の表示ロジック（責務の分離）
│   └── styles/                # グローバルスタイル (Tailwind CSS)
└── public/                    # ロゴ、画像、サイトマップ等の静的資産
```

---

## 📸 スクリーンショット

> [!TIP]
> ここにサイトのキャプチャ画像を貼ると、視覚的なインパクトが強まります。
> `![メインビジュアル](./public/screenshot.png)` のように記述します。

---

## 🚀 開発環境のセットアップ

本プロジェクトをローカル環境で再現し、開発を開始する手順は以下の通りである。

### 1. リポジトリのクローン
GitHubからソースコードをローカル環境にコピーし、プロジェクトディレクトリへ移動する。
```bash
git clone <your-repository-url>
cd <project-directory>
```

### 2. 依存関係のインストール
package.json に定義されたライブラリを一括でインストールする。

```bash
npm install
```

### 3. 環境変数の設定
microCMSからデータを取得するため、ルートディレクトリに .env.local ファイルを作成し、必要なAPI情報を記述する。

```bash
touch .env.local
```

記述内容:
```text
SERVICE_DOMAIN=your-service-domain
API_KEY=your-api-key
VERCEL_ENV=develop / preview / production #previewを設定すると公開してもサイトがインデックスされなくなる
```
### 4. 開発サーバーの起動
ローカルサーバーを起動し、ブラウザで動作を確認する。

```bash
npm run dev
```

起動後、 http://localhost:3000 にアクセスすることで、リアルタイムにコードの変更を確認しながら開発が可能となる。